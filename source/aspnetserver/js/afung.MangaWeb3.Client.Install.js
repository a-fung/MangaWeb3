// afung.MangaWeb3.Client.Install.js
(function(){
Type.registerNamespace('afung.MangaWeb3.Client.Install');afung.MangaWeb3.Client.Install.InstallApp=function(){afung.MangaWeb3.Client.Install.InstallApp.initializeBase(this);}
afung.MangaWeb3.Client.Install.InstallApp.prototype={startStage2:function(){afung.MangaWeb3.Client.Template.templates[afung.MangaWeb3.Client.Template.templates.length]='install';afung.MangaWeb3.Client.Template.templateIds['install']=['install-mudraw-error','install-pdfdraw-error','install-pdfinfo-error','install-pdfinfoexe-error','install-rar-error','install-zip-error','install-sevenzip-error','install-gd-error','install-mysql-connect-error','install-mysql-error','install-module'];afung.MangaWeb3.Client.Request.endpoint='InstallAjax';afung.MangaWeb3.Client.Install.InstallApp.callBaseMethod(this, 'startStage2');},loadFirstModule:function(){new afung.MangaWeb3.Client.Install.Module.InstallModule();}}
Type.registerNamespace('afung.MangaWeb3.Client.Install.Module');afung.MangaWeb3.Client.Install.Module.InstallModule=function(){afung.MangaWeb3.Client.Install.Module.InstallModule.initializeBase(this,['install','install-module']);}
afung.MangaWeb3.Client.Install.Module.InstallModule.prototype={$1_0:false,get_$1_1:function(){return this.$1_0;},set_$1_1:function($p0){if($p0){$('#install-zip-checkbox',this.attachedObject).removeAttr(afung.MangaWeb3.Client.HtmlConstants.attributeDisabled);}else{$('#install-zip-checkbox',this.attachedObject).attr(afung.MangaWeb3.Client.HtmlConstants.attributeDisabled,afung.MangaWeb3.Client.HtmlConstants.attributeDisabled).removeAttr(afung.MangaWeb3.Client.HtmlConstants.attributeChecked);}this.$1_0=$p0;return $p0;},$1_2:false,get_$1_3:function(){return this.$1_2;},set_$1_3:function($p0){if($p0){$('#install-rar-checkbox',this.attachedObject).removeAttr(afung.MangaWeb3.Client.HtmlConstants.attributeDisabled);}else{$('#install-rar-checkbox',this.attachedObject).attr(afung.MangaWeb3.Client.HtmlConstants.attributeDisabled,afung.MangaWeb3.Client.HtmlConstants.attributeDisabled).removeAttr(afung.MangaWeb3.Client.HtmlConstants.attributeChecked);}this.$1_2=$p0;return $p0;},$1_4:false,get_$1_5:function(){return this.$1_4;},set_$1_5:function($p0){if($p0){$('#install-pdf-checkbox',this.attachedObject).removeAttr(afung.MangaWeb3.Client.HtmlConstants.attributeDisabled);}else{$('#install-pdf-checkbox',this.attachedObject).attr(afung.MangaWeb3.Client.HtmlConstants.attributeDisabled,afung.MangaWeb3.Client.HtmlConstants.attributeDisabled).removeAttr(afung.MangaWeb3.Client.HtmlConstants.attributeChecked);}this.$1_4=$p0;return $p0;},$1_6:false,initialize:function(){$('#install-form').hide();afung.MangaWeb3.Client.Request.send(new afung.MangaWeb3.Common.PreInstallCheckRequest(),ss.Delegate.create(this,this.$1_7));},$1_7:function($p0){if($p0.installed){return;}$('#install-preinstall-check').hide();$('#install-form').show();$('#install-mysql-check').hide();$('#install-mysql-loading').hide();$('#install-sevenzip-check').hide();$('#install-sevenzip-loading').hide();$('#install-pdfinfoexe-check').hide();$('#install-pdfinfoexe-loading').hide();$('#install-mudraw-check').hide();$('#install-mudraw-loading').hide();$('#install-admin-username-check').hide();$('#install-admin-password-check').hide();$('#install-admin-password2-check').hide();if(afung.MangaWeb3.Client.Environment.serverType===afung.MangaWeb3.Client.ServerType.aspNet){this.set_$1_1(this.set_$1_3(this.set_$1_5(false)));this.$1_6=true;}else{$('#install-sevenzip').hide();$('#install-pdfinfoexe').hide();$('#install-mudraw').hide();this.set_$1_1($p0.zip);this.set_$1_3($p0.rar);this.set_$1_5($p0.pdfinfo&&$p0.pdfdraw);this.$1_6=$p0.mySql&&$p0.gd;if(!$p0.mySql){afung.MangaWeb3.Client.Template.get('install','install-mysql-error').appendTo($('#mysql-error-area'));}if(!$p0.gd){afung.MangaWeb3.Client.Template.get('install','install-gd-error').appendTo($('#gd-error-area'));}if(!$p0.zip){afung.MangaWeb3.Client.Template.get('install','install-zip-error').appendTo($('#zip-error-area'));}if(!$p0.rar){afung.MangaWeb3.Client.Template.get('install','install-rar-error').appendTo($('#rar-error-area'));}if(!$p0.pdfinfo){afung.MangaWeb3.Client.Template.get('install','install-pdfinfo-error').appendTo($('#pdfinfo-error-area'));}if(!$p0.pdfdraw){afung.MangaWeb3.Client.Template.get('install','install-pdfdraw-error').appendTo($('#mudraw-error-area'));}}$('#install-mysql-check-setting').click(ss.Delegate.create(this,this.$1_D));$('#install-mysql-server').change(ss.Delegate.create(this,this.$1_C));$('#install-mysql-port').change(ss.Delegate.create(this,this.$1_C));$('#install-mysql-username').change(ss.Delegate.create(this,this.$1_C));$('#install-mysql-password').change(ss.Delegate.create(this,this.$1_C));$('#install-mysql-database').change(ss.Delegate.create(this,this.$1_C));},$1_8:false,get_$1_9:function(){return this.$1_8;},set_$1_9:function($p0){this.$1_8=$p0;if($p0){$('#install-mysql-loading').show();}else{$('#install-mysql-loading').hide();}return $p0;},$1_A:false,get_$1_B:function(){return this.$1_A;},set_$1_B:function($p0){this.$1_A=$p0;if($p0){$('#install-mysql-check').show();}else{$('#install-mysql-check').hide();}return $p0;},$1_C:function($p0){this.set_$1_B(false);},$1_D:function($p0){if(this.get_$1_9()){return;}var $0=$('#install-mysql-server').val();var $1=$('#install-mysql-port').val();var $2=$('#install-mysql-username').val();var $3=$('#install-mysql-password').val();var $4=$('#install-mysql-database').val();if(String.isNullOrEmpty($0)||String.isNullOrEmpty($1)||String.isNullOrEmpty($2)||String.isNullOrEmpty($4)){return;}var $5=parseInt($1,10);var $6=new afung.MangaWeb3.Common.CheckMySqlSettingRequest();$6.server=$0;$6.port=$5;$6.username=$2;$6.password=$3;$6.database=$4;$('#install-mysql-connect-error').remove();this.set_$1_9(true);this.set_$1_B(false);afung.MangaWeb3.Client.Request.send($6,ss.Delegate.create(this,this.$1_E),ss.Delegate.create(this,this.$1_F));},$1_E:function($p0){this.set_$1_9(false);this.set_$1_B($p0.pass);if(!$p0.pass){this.$1_F(new Error(''));}},$1_F:function($p0){this.set_$1_B(this.set_$1_9(false));afung.MangaWeb3.Client.Template.get('install','install-mysql-connect-error').appendTo($('#mysql-error-area'));}}
afung.MangaWeb3.Client.Install.InstallApp.registerClass('afung.MangaWeb3.Client.Install.InstallApp',afung.MangaWeb3.Client.Application);afung.MangaWeb3.Client.Install.Module.InstallModule.registerClass('afung.MangaWeb3.Client.Install.Module.InstallModule',afung.MangaWeb3.Client.Module.ModuleBase);})();// This script was generated using Script# v0.7.4.0
